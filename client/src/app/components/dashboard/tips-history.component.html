<mat-card class="tips-card">
    <mat-card-header>
        <mat-card-title>Your Earnings ðŸ’°</mat-card-title>
        <mat-card-subtitle>Total Tips: {{ totalTips | currency:'SGD' }}</mat-card-subtitle>
        <mat-card-subtitle>Total Count: {{ totalTipCount }}</mat-card-subtitle>
    </mat-card-header>
    
    <mat-card-content>
        <div class="table-container">
            <table mat-table [dataSource]="dataSource" class="mat-elevation-z2" matSort>
                <ng-container matColumnDef="tipId">
                    <th mat-header-cell *matHeaderCellDef>Tip ID</th>
                    <td mat-cell *matCellDef="let tip">{{ tip.id }}</td>
                </ng-container>
                <ng-container matColumnDef="tipperName">
                    <th mat-header-cell *matHeaderCellDef>Viber Name</th>
                    <td mat-cell *matCellDef="let tip"
                        [style.color]="tip.tipperName === 'Viber' ? '#aaa' : 'inherit'">{{ tip.tipperName }}</td>
                </ng-container>
                <ng-container matColumnDef="tipperMessage">
                    <th mat-header-cell *matHeaderCellDef>Viber Message</th>
                    <td mat-cell *matCellDef="let tip" 
                        [style.color]="tip.tipperMessage === 'No message written' ? '#aaa' : 'inherit'"
                        class="text-center">
                        {{ tip.tipperMessage }}
                    </td>
                </ng-container>
                <ng-container matColumnDef="amount">
                    <th mat-header-cell *matHeaderCellDef>Amount (SGD)</th>
                    <td mat-cell *matCellDef="let tip" class="amount-cell">{{ tip.amount | currency:'SGD' }}</td>
                </ng-container>
                <ng-container matColumnDef="paymentIntentId">
                    <th mat-header-cell *matHeaderCellDef>Transaction ID</th>
                    <td mat-cell *matCellDef="let tip" [title]="tip.paymentIntentId">{{ tip.paymentIntentId }}</td>
                </ng-container>
                <ng-container matColumnDef="updatedAt">
                    <th mat-header-cell *matHeaderCellDef class="trans-date-header">
                        <span class="header-content">Transaction Date
                        <button mat-icon-button (click)="toggleSort()" class="sort-button">
                            <mat-icon>{{ sortDirection === 'asc' ? 'arrow_upward' : 'arrow_downward' }}</mat-icon>
                        </button></span>
                    </th>
                    <td mat-cell *matCellDef="let tip">
                        {{ tip.updatedAt | date:'dd MMM yyyy, HH:mm' }}
                    </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="columns"></tr>
                <tr mat-row *matRowDef="let row; columns: columns;"></tr>
            </table>
            <mat-paginator [pageSize]="10" [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
        </div>
    </mat-card-content>
</mat-card>