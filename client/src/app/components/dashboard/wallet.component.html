<mat-card class="wallet-card">
    <mat-card-header>
        <mat-card-title>Your Wallet</mat-card-title>
        <mat-card-subtitle>Manage your earnings and payouts</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
        <div class="balance-section">
            <h2>Wallet Balance</h2>
            <div class="balance-amount">{{ walletBalance | currency:'SGD' }}</div>
            <button mat-raised-button color="primary" class="withdraw-button"
                    [disabled]="walletBalance < 50" (click)="withdrawPayout()"
                    [matTooltip]="walletBalance < 50 ? 'Minimum withdrawal amount is SGD 50' : ''"
                    matTooltipPosition="above">
                Withdraw Payout
            </button>
            <p class="instructions">* You can only withdraw payouts with a minimum balance of SGD 50.</p>
        </div>

        <div class="payouts-section">
            <h3>Pending Payouts</h3>
            <div class="pending-amount">{{ pendingPayouts | currency:'SGD' }}</div>
            <p *ngIf="pendingPayouts === 0">No pending payouts at the moment.</p>
        </div>

        <div class="history-section">
            <h3>Recent Payout History</h3>
            <table mat-table [dataSource]="payoutHistory" class="mat-elevation-z2">
                <ng-container matColumnDef="date">
                    <th mat-header-cell *matHeaderCellDef>Date</th>
                    <td mat-cell *matCellDef="let payout">{{ payout.date | date:'dd MMM yyyy' }}</td>
                </ng-container>
                <ng-container matColumnDef="amount">
                    <th mat-header-cell *matHeaderCellDef>Amount (SGD)</th>
                    <td mat-cell *matCellDef="let payout">{{ payout.amount | currency:'SGD' }}</td>
                </ng-container>
                <ng-container matColumnDef="status">
                    <th mat-header-cell *matHeaderCellDef>Status</th>
                    <td mat-cell *matCellDef="let payout" [ngClass]="payout.status.toLowerCase()">
                        {{ payout.status }}
                    </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="payoutColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: payoutColumns;"></tr>
            </table>
            <p *ngIf="payoutHistory.length === 0">No payout history available.</p>
        </div>
    </mat-card-content>
</mat-card>